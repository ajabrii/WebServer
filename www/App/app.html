<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WebServ 42 - Complete Documentation & Testing Suite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    }

    body {
      background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
      color: #e8e8e8;
      overflow-x: hidden;
      line-height: 1.6;
    }

    .background-grid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(0,255,136,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,255,136,0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: -1;
      animation: gridMove 20s linear infinite;
    }

    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      padding: 20px 40px;
      backdrop-filter: blur(20px);
      border-bottom: 2px solid #00ff88;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
      color: #00ff88;
      text-shadow: 0 0 10px #00ff88;
    }

    .nav-menu {
      display: flex;
      gap: 20px;
    }

    .nav-menu button {
      text-decoration: none;
      color: #ccc;
      font-weight: 600;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.3s ease;
      border: 1px solid transparent;
      cursor: pointer;
      background: none;
      font-family: inherit;
      font-size: inherit;
    }

    .nav-menu button:hover {
      color: #00ff88;
      border-color: #00ff88;
      box-shadow: 0 0 10px rgba(0,255,136,0.3);
    }

    .test-btn {
      padding: 10px 20px;
      background: linear-gradient(45deg, #00ff88, #00cc6a);
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.2s ease;
    }

    .test-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0,255,136,0.4);
    }

    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .hero-section {
      text-align: center;
      margin-bottom: 60px;
      padding: 60px 20px;
      background: linear-gradient(135deg, rgba(0,255,136,0.1), rgba(0,200,100,0.05));
      border-radius: 20px;
      border: 1px solid rgba(0,255,136,0.2);
    }

    .hero-title {
      font-size: 48px;
      background: linear-gradient(45deg, #00ff88, #00cc6a, #ffff00);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      font-weight: bold;
    }

    .hero-subtitle {
      font-size: 20px;
      color: #aaa;
      margin-bottom: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .quick-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .stat-card {
      background: rgba(0,0,0,0.6);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #00ff88;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .stat-number {
      font-size: 32px;
      font-weight: bold;
      color: #00ff88;
      display: block;
    }

    .stat-label {
      color: #ccc;
      font-size: 14px;
      margin-top: 8px;
    }

    .section {
      margin-bottom: 50px;
      background: rgba(0,0,0,0.4);
      padding: 30px;
      border-radius: 15px;
      border-left: 4px solid #00ff88;
      backdrop-filter: blur(10px);
    }

    .section-title {
      font-size: 32px;
      color: #00ff88;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .section-subtitle {
      font-size: 24px;
      color: #ffff00;
      margin: 25px 0 15px 0;
      border-bottom: 2px solid rgba(255,255,0,0.3);
      padding-bottom: 5px;
    }

    .code-block {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 20px;
      margin: 15px 0;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      position: relative;
    }

    .code-block::before {
      content: "WEBSERV CODE";
      position: absolute;
      top: 5px;
      right: 10px;
      font-size: 10px;
      color: #7c3aed;
      opacity: 0.7;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin: 30px 0;
    }

    .feature-card {
      background: linear-gradient(135deg, rgba(0,255,136,0.1), rgba(0,0,0,0.8));
      padding: 25px;
      border-radius: 12px;
      border: 1px solid rgba(0,255,136,0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,255,136,0.2);
    }

    .feature-icon {
      font-size: 32px;
      margin-bottom: 15px;
      display: block;
    }

    .feature-title {
      font-size: 18px;
      color: #00ff88;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .testing-section {
      background: linear-gradient(135deg, rgba(255,255,0,0.1), rgba(0,0,0,0.8));
      border: 2px solid #ffff00;
      border-radius: 15px;
      padding: 40px;
      margin: 40px 0;
    }

    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .test-card {
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #ffff00;
      text-align: center;
      transition: all 0.3s ease;
    }

    .test-card:hover {
      background: rgba(255,255,0,0.1);
      transform: scale(1.05);
    }

    .test-card-title {
      font-size: 18px;
      color: #ffff00;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .test-card-desc {
      color: #ccc;
      font-size: 14px;
      margin-bottom: 15px;
    }

    .test-card-btn {
      padding: 8px 16px;
      background: #ffff00;
      color: #000;
      text-decoration: none;
      border-radius: 6px;
      font-weight: bold;
      display: inline-block;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
      font-family: inherit;
      font-size: inherit;
    }

    .test-card-btn:hover {
      background: #fff;
      transform: scale(1.1);
    }

    .architecture-diagram {
      background: #0a0a0a;
      border: 2px solid #00ff88;
      border-radius: 10px;
      padding: 30px;
      margin: 30px 0;
      text-align: center;
      font-family: monospace;
      overflow-x: auto;
    }

    .flow-step {
      display: inline-block;
      background: rgba(0,255,136,0.2);
      padding: 10px 15px;
      margin: 5px;
      border-radius: 8px;
      border: 1px solid #00ff88;
    }

    .arrow {
      color: #ffff00;
      font-size: 20px;
      margin: 0 10px;
    }

    ul {
      list-style: none;
      padding-left: 0;
    }

    li {
      color: #ccc;
      margin: 8px 0;
      padding-left: 25px;
      position: relative;
    }

    li::before {
      content: "‚ñ∂";
      color: #00ff88;
      position: absolute;
      left: 0;
    }

    .highlight {
      color: #ffff00;
      font-weight: bold;
    }

    .emphasis {
      color: #00ff88;
      font-weight: bold;
    }

    .warning {
      background: rgba(255,0,0,0.1);
      border-left: 4px solid #ff0000;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
    }

    .success {
      background: rgba(0,255,0,0.1);
      border-left: 4px solid #00ff00;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
    }

    .info {
      background: rgba(0,136,255,0.1);
      border-left: 4px solid #0088ff;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
    }

    .interactive-terminal {
      background: #000;
      border: 2px solid #00ff88;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      font-family: monospace;
      font-size: 14px;
      min-height: 200px;
      position: relative;
    }

    .terminal-header {
      color: #00ff88;
      border-bottom: 1px solid #333;
      padding-bottom: 10px;
      margin-bottom: 15px;
    }

    .terminal-output {
      color: #ccc;
      white-space: pre-wrap;
      margin-bottom: 10px;
    }

    .terminal-input {
      background: transparent;
      border: none;
      color: #00ff88;
      outline: none;
      width: 100%;
      font-family: monospace;
      font-size: 14px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: #1a1a2e;
      margin: 5% auto;
      padding: 30px;
      border-radius: 15px;
      border: 2px solid #00ff88;
      width: 80%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover {
      color: #00ff88;
    }

    @media (max-width: 768px) {
      .hero-title {
        font-size: 32px;
      }
      .nav-menu {
        flex-direction: column;
        gap: 10px;
      }
      header {
        flex-direction: column;
        gap: 20px;
      }
      .feature-grid {
        grid-template-columns: 1fr;
      }
      .test-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="background-grid"></div>

  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const App = () => {
      const [serverStats, setServerStats] = useState({
        requests: 0,
        connections: 0,
        uptime: 0
      });

      const [testResults, setTestResults] = useState({});
      const [selectedSection, setSelectedSection] = useState('docs');

      useEffect(() => {
        const interval = setInterval(() => {
          setServerStats(prev => ({
            requests: prev.requests + Math.floor(Math.random() * 3),
            connections: Math.floor(Math.random() * 20) + 5,
            uptime: prev.uptime + 1
          }));
        }, 2000);
        return () => clearInterval(interval);
      }, []);

      const runTest = async (testType) => {
        setTestResults(prev => ({ ...prev, [testType]: 'running' }));
        
        try {
          let response;
          switch(testType) {
            case 'get':
              response = await fetch('/');
              break;
            case 'post':
              response = await fetch('/uploads/', {
                method: 'POST',
                body: new FormData(),
              });
              break;
            case 'delete':
              response = await fetch('/uploads/test.txt', {
                method: 'DELETE'
              });
              break;
            case 'cgi':
              response = await fetch('/cgi-bin/test.py');
              break;
            default:
              response = { ok: true, status: 200 };
          }
          
          setTestResults(prev => ({ 
            ...prev, 
            [testType]: response.ok ? 'success' : 'error'
          }));
        } catch (error) {
          setTestResults(prev => ({ ...prev, [testType]: 'error' }));
        }
      };

      const scrollToSection = (section) => {
        setSelectedSection(section);
        document.getElementById(section)?.scrollIntoView({ behavior: 'smooth' });
      };

      return (
        <div>
          <header>
            <div className="logo">{'{ WebServ 42 }'}</div>
            <nav className="nav-menu">
              <button onClick={() => scrollToSection('docs')}>üìö Docs</button>
              <button onClick={() => scrollToSection('architecture')}>üèóÔ∏è Architecture</button>
              <button onClick={() => scrollToSection('testing')}>üß™ Testing</button>
              <button onClick={() => scrollToSection('advanced')}>‚ö° Advanced</button>
              <a href="post.html" style={{color: '#ccc', textDecoration: 'none', padding: '8px 16px', borderRadius: '6px', transition: 'all 0.3s ease', border: '1px solid transparent'}}>üì§ POST</a>
              <a href="delete.html" style={{color: '#ccc', textDecoration: 'none', padding: '8px 16px', borderRadius: '6px', transition: 'all 0.3s ease', border: '1px solid transparent'}}>üóëÔ∏è DELETE</a>
              <a href="cgi.html" style={{color: '#ccc', textDecoration: 'none', padding: '8px 16px', borderRadius: '6px', transition: 'all 0.3s ease', border: '1px solid transparent'}}>‚öôÔ∏è CGI</a>
            </nav>
            <button className="test-btn" onClick={() => scrollToSection('testing')}>
              Run Tests
            </button>
          </header>

          <main>
            {/* Hero Section */}
            <div className="hero-section">
              <h1 className="hero-title">WebServ 42 Project</h1>
              <p className="hero-subtitle">
                A complete HTTP/1.1 web server implementation in C++98. 
                Master socket programming, HTTP protocol, and concurrent request handling.
              </p>
              
              <div className="quick-stats">
                <div className="stat-card">
                  <span className="stat-number">{serverStats.requests}</span>
                  <div className="stat-label">Total Requests</div>
                </div>
                <div className="stat-card">
                  <span className="stat-number">{serverStats.connections}</span>
                  <div className="stat-label">Active Connections</div>
                </div>
                <div className="stat-card">
                  <span className="stat-number">{Math.floor(serverStats.uptime / 60)}m</span>
                  <div className="stat-label">Server Uptime</div>
                </div>
                <div className="stat-card">
                  <span className="stat-number">HTTP/1.1</span>
                  <div className="stat-label">Protocol Version</div>
                </div>
              </div>
            </div>

            {/* Documentation Section */}
            <section id="docs" className="section">
              <h2 className="section-title">
                üìö Complete Documentation
              </h2>

              <div className="section-subtitle">üöÄ What is WebServ?</div>
              <p>
                WebServ is a <span className="emphasis">custom HTTP/1.1 web server</span> built entirely from scratch in C++98. 
                This project is part of the 42 School curriculum and teaches students the fundamental concepts of:
              </p>
              <ul>
                <li><span className="highlight">Socket Programming</span> - Low-level network communication</li>
                <li><span className="highlight">HTTP Protocol</span> - Request/response lifecycle and headers</li>
                <li><span className="highlight">I/O Multiplexing</span> - Handling multiple concurrent connections</li>
                <li><span className="highlight">CGI Integration</span> - Dynamic content generation</li>
                <li><span className="highlight">Configuration Parsing</span> - Nginx-style config files</li>
                <li><span className="highlight">Memory Management</span> - Safe C++ practices without leaks</li>
              </ul>

              <div className="section-subtitle">‚ö° Core Features</div>
              <div className="feature-grid">
                <div className="feature-card">
                  <span className="feature-icon">üåê</span>
                  <div className="feature-title">HTTP/1.1 Protocol</div>
                  <p>Full implementation with GET, POST, DELETE methods. Proper status codes, headers, and connection management.</p>
                </div>
                <div className="feature-card">
                  <span className="feature-icon">‚öôÔ∏è</span>
                  <div className="feature-title">CGI Support</div>
                  <p>Execute Python, PHP, and Shell scripts dynamically. Environment variable passing and timeout handling.</p>
                </div>
                <div className="feature-card">
                  <span className="feature-icon">üìÅ</span>
                  <div className="feature-title">File Operations</div>
                  <p>Serve static files, handle uploads, directory listing, and custom index pages with MIME type detection.</p>
                </div>
                <div className="feature-card">
                  <span className="feature-icon">üîß</span>
                  <div className="feature-title">Configuration</div>
                  <p>Nginx-style config file parsing with virtual hosts, route matching, and method restrictions.</p>
                </div>
                <div className="feature-card">
                  <span className="feature-icon">üîÑ</span>
                  <div className="feature-title">Concurrency</div>
                  <p>Non-blocking I/O using poll() system call. Handle hundreds of simultaneous connections efficiently.</p>
                </div>
                <div className="feature-card">
                  <span className="feature-icon">üõ°Ô∏è</span>
                  <div className="feature-title">Security</div>
                  <p>Path traversal protection, body size limits, timeout handling, and proper error responses.</p>
                </div>
              </div>

              <div className="section-subtitle">üóÇÔ∏è Project Structure</div>
              <div className="code-block">
{`webserv/
‚îú‚îÄ‚îÄ Makefile              # Build configuration
‚îú‚îÄ‚îÄ config/               
‚îÇ   ‚îî‚îÄ‚îÄ webserv.conf     # Server configuration file
‚îú‚îÄ‚îÄ includes/            # Header files
‚îÇ   ‚îú‚îÄ‚îÄ HttpServer.hpp   # Main server class
‚îÇ   ‚îú‚îÄ‚îÄ HttpRequest.hpp  # Request parsing
‚îÇ   ‚îú‚îÄ‚îÄ HttpResponse.hpp # Response building
‚îÇ   ‚îú‚îÄ‚îÄ Reactor.hpp      # Event loop (poll-based)
‚îÇ   ‚îî‚îÄ‚îÄ ConfigParser.hpp # Config file parser
‚îú‚îÄ‚îÄ src/                 # Source files
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp         # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ HttpServer.cpp   # Socket setup & accept()
‚îÇ   ‚îú‚îÄ‚îÄ Reactor.cpp      # Event multiplexing
‚îÇ   ‚îú‚îÄ‚îÄ Connection.cpp   # Client connection handling
‚îÇ   ‚îî‚îÄ‚îÄ handlers/        # HTTP method handlers
‚îú‚îÄ‚îÄ www/                 # Static web content
‚îÇ   ‚îú‚îÄ‚îÄ index.html       # Default page
‚îÇ   ‚îî‚îÄ‚îÄ error/           # Custom error pages
‚îî‚îÄ‚îÄ cgi-bin/             # CGI scripts
    ‚îú‚îÄ‚îÄ test.py          # Python CGI
    ‚îî‚îÄ‚îÄ upload.php       # PHP file upload`}
              </div>

              <div className="section-subtitle">üß† Learning Objectives</div>
              <div className="info">
                <strong>By completing WebServ, you'll master:</strong>
                <ul>
                  <li><strong>Socket Programming:</strong> socket(), bind(), listen(), accept(), poll()</li>
                  <li><strong>HTTP Protocol:</strong> Request parsing, header management, status codes</li>
                  <li><strong>Memory Management:</strong> RAII principles, avoiding leaks in C++</li>
                  <li><strong>Concurrent Programming:</strong> Non-blocking I/O and event-driven architecture</li>
                  <li><strong>File I/O:</strong> Reading, writing, and streaming large files safely</li>
                  <li><strong>Process Management:</strong> fork(), execve(), pipe() for CGI execution</li>
                </ul>
              </div>
            </section>

            {/* Architecture Section */}
            <section id="architecture" className="section">
              <h2 className="section-title">
                üèóÔ∏è Server Architecture
              </h2>

              <div className="section-subtitle">üì° Request Flow</div>
              <div className="architecture-diagram">
                <div className="flow-step">Client Request</div>
                <span className="arrow">‚Üí</span>
                <div className="flow-step">Socket Accept</div>
                <span className="arrow">‚Üí</span>
                <div className="flow-step">Parse Headers</div>
                <span className="arrow">‚Üí</span>
                <div className="flow-step">Route Matching</div>
                <br/><br/>
                <div className="flow-step">Method Handler</div>
                <span className="arrow">‚Üí</span>
                <div className="flow-step">Response Build</div>
                <span className="arrow">‚Üí</span>
                <div className="flow-step">Send Response</div>
                <span className="arrow">‚Üí</span>
                <div className="flow-step">Connection Close</div>
              </div>

              <div className="section-subtitle">üîÑ Event Loop (Reactor Pattern)</div>
              <div className="code-block">
{`while (!shutdown) {
    // 1. Poll for events on all sockets
    int ready = poll(pollFDs, numFDs, timeout);
    
    for (each ready socket) {
        if (socket is listening socket) {
            // Accept new client connection
            int clientFd = accept(listenFd, ...);
            addToReactor(clientFd);
        }
        else if (socket is client socket) {
            if (POLLIN) {
                // Read HTTP request
                parseRequest(clientFd);
                if (requestComplete) {
                    handleRequest(clientFd);
                }
            }
            if (POLLOUT) {
                // Send HTTP response
                sendResponse(clientFd);
            }
        }
    }
    
    // Clean up timed-out connections
    cleanupTimeouts();
}`}
              </div>

              <div className="section-subtitle">üîß Class Design</div>
              <div className="code-block">
{`class HttpServer {
    private:
        std::vector<int> listenFDs;    // Listening sockets
        ServerConfig config;           // Configuration
    public:
        void setup();                  // Bind & listen
        Connection acceptClient(int fd);
};

class Reactor {
    private:
        std::vector<pollfd> pollFDs;   // File descriptors for poll()
        std::map<int, Connection*> connections;
    public:
        void poll();                   // Main event loop
        void addConnection(Connection* conn);
        void removeConnection(int fd);
};

class HttpRequest {
    public:
        std::string method, uri, version;
        std::map<string, string> headers;
        std::string body;
        
        void parseHeaders(const std::string& raw);
        bool parseBody(std::string& buffer);
};`}
              </div>
            </section>

            {/* Testing Section */}
            <section id="testing" className="testing-section">
              <h2 className="section-title">
                üß™ Interactive Testing Suite
              </h2>
              
              <p>Test all WebServ features directly from this interface. Each test sends real HTTP requests to your server.</p>

              <div className="test-grid">
                <div className="test-card">
                  <div className="test-card-title">GET Request</div>
                  <div className="test-card-desc">Test static file serving and directory listing</div>
                  <button 
                    className="test-card-btn"
                    onClick={() => runTest('get')}
                  >
                    {testResults.get === 'running' ? 'Testing...' : 
                     testResults.get === 'success' ? '‚úÖ Passed' :
                     testResults.get === 'error' ? '‚ùå Failed' : 'Run Test'}
                  </button>
                </div>

                <div className="test-card">
                  <div className="test-card-title">POST Upload</div>
                  <div className="test-card-desc">Test file upload with multipart/form-data</div>
                  <button 
                    className="test-card-btn"
                    onClick={() => runTest('post')}
                  >
                    {testResults.post === 'running' ? 'Testing...' : 
                     testResults.post === 'success' ? '‚úÖ Passed' :
                     testResults.post === 'error' ? '‚ùå Failed' : 'Run Test'}
                  </button>
                </div>

                <div className="test-card">
                  <div className="test-card-title">DELETE Method</div>
                  <div className="test-card-desc">Test file deletion functionality</div>
                  <button 
                    className="test-card-btn"
                    onClick={() => runTest('delete')}
                  >
                    {testResults.delete === 'running' ? 'Testing...' : 
                     testResults.delete === 'success' ? '‚úÖ Passed' :
                     testResults.delete === 'error' ? '‚ùå Failed' : 'Run Test'}
                  </button>
                </div>

                <div className="test-card">
                  <div className="test-card-title">CGI Scripts</div>
                  <div className="test-card-desc">Test Python/PHP script execution</div>
                  <button 
                    className="test-card-btn"
                    onClick={() => runTest('cgi')}
                  >
                    {testResults.cgi === 'running' ? 'Testing...' : 
                     testResults.cgi === 'success' ? '‚úÖ Passed' :
                     testResults.cgi === 'error' ? '‚ùå Failed' : 'Run Test'}
                  </button>
                </div>

                <div className="test-card">
                  <div className="test-card-title">Error Handling</div>
                  <div className="test-card-desc">Test 404, 405, 500 error responses</div>
                  <a href="/nonexistent" className="test-card-btn">Test 404</a>
                </div>

                <div className="test-card">
                  <div className="test-card-title">Stress Test</div>
                  <div className="test-card-desc">Test concurrent connections</div>
                  <button 
                    className="test-card-btn"
                    onClick={() => {
                      for(let i = 0; i < 10; i++) {
                        setTimeout(() => fetch('/'), i * 100);
                      }
                    }}
                  >
                    Run Load Test
                  </button>
                </div>
              </div>

              <div className="section-subtitle">üõ†Ô∏è Manual Testing Commands</div>
              <div className="code-block">
{`# Basic GET request
curl -v http://localhost:8080/

# POST file upload
curl -X POST -F "file=@test.txt" http://localhost:8080/uploads/

# DELETE request  
curl -X DELETE http://localhost:8080/uploads/test.txt

# CGI script execution
curl http://localhost:8080/cgi-bin/test.py

# Test with custom headers
curl -H "User-Agent: WebServ-Tester" http://localhost:8080/

# Test chunked transfer encoding
curl -H "Transfer-Encoding: chunked" --data-binary @large_file.txt http://localhost:8080/upload`}
              </div>
            </section>

            {/* Advanced Section */}
            <section id="advanced" className="section">
              <h2 className="section-title">
                ‚ö° Advanced Features
              </h2>

              <div className="section-subtitle">üîí Security Implementations</div>
              <ul>
                <li><strong>Path Traversal Protection:</strong> Prevents "../" attacks</li>
                <li><strong>Body Size Limits:</strong> Configurable max request body size</li>
                <li><strong>Timeout Handling:</strong> CGI and connection timeouts</li>
                <li><strong>Method Validation:</strong> Only allowed methods per route</li>
                <li><strong>Header Validation:</strong> Malformed header detection</li>
              </ul>

              <div className="section-subtitle">‚öôÔ∏è Configuration Options</div>
              <div className="code-block">
{`server {
    host = 127.0.0.1;
    port = 8080;
    server_name = webserv.42.fr;
    client_max_body_size = 1048576;  # 1MB
    
    location / {
        root = ./www;
        index = index.html;
        methods = GET POST;
        autoindex = on;
    }
    
    location /uploads {
        root = ./uploads;
        methods = GET POST DELETE;
        upload_dir = ./uploads;
    }
    
    location /cgi-bin {
        root = ./cgi-bin;
        methods = GET POST;
        cgi = .py /usr/bin/python3;
        cgi = .php /usr/bin/php;
    }
}`}
              </div>

              <div className="section-subtitle">üöÄ Performance Optimizations</div>
              <ul>
                <li><strong>Non-blocking I/O:</strong> Uses poll() for efficiency</li>
                <li><strong>Connection Pooling:</strong> Reuse connections when possible</li>
                <li><strong>Buffer Management:</strong> Efficient memory usage</li>
                <li><strong>Static File Caching:</strong> MIME type detection</li>
                <li><strong>Keep-Alive Support:</strong> Reduce connection overhead</li>
              </ul>

              <div className="warning">
                <strong>‚ö†Ô∏è Common Pitfalls to Avoid:</strong>
                <ul>
                  <li>Memory leaks from unclosed file descriptors</li>
                  <li>Zombie processes from CGI scripts</li>
                  <li>Buffer overflows in request parsing</li>
                  <li>Infinite loops in polling logic</li>
                  <li>Race conditions in signal handling</li>
                </ul>
              </div>

              <div className="success">
                <strong>‚úÖ Best Practices:</strong>
                <ul>
                  <li>Always close file descriptors in error paths</li>
                  <li>Use RAII for automatic resource management</li>
                  <li>Validate all input data thoroughly</li>
                  <li>Implement proper logging for debugging</li>
                  <li>Test with tools like Valgrind for memory safety</li>
                </ul>
              </div>
            </section>

            {/* Interactive Terminal */}
            <div className="interactive-terminal">
              <div className="terminal-header">
                WebServ Debug Terminal - Type 'help' for commands
              </div>
              <div className="terminal-output" id="terminalOutput">
Welcome to WebServ 42 Debug Terminal
Server Status: Running on port 8080
Ready for commands...
              </div>
              <div>
                <span style={{color: '#00ff88'}}>webserv@42:~$ </span>
                <input 
                  type="text" 
                  className="terminal-input"
                  placeholder="Enter command (help, status, config, test)"
                  onKeyPress={(e) => {
                    if (e.key === 'Enter') {
                      const output = document.getElementById('terminalOutput');
                      output.textContent += `\nwebserv@42:~$ ${e.target.value}\n`;
                      
                      switch(e.target.value.toLowerCase()) {
                        case 'help':
                          output.textContent += 'Available commands:\n  status - Show server status\n  config - Show configuration\n  test - Run quick test\n  clear - Clear terminal\n';
                          break;
                        case 'status':
                          output.textContent += `Server: Running\nConnections: ${serverStats.connections}\nRequests: ${serverStats.requests}\nUptime: ${Math.floor(serverStats.uptime/60)}m ${serverStats.uptime%60}s\n`;
                          break;
                        case 'config':
                          output.textContent += 'Config loaded from: ./config/webserv.conf\nListening on: 127.0.0.1:8080\nRoot directory: ./www\nCGI enabled: Yes\n';
                          break;
                        case 'test':
                          output.textContent += 'Running quick test...\n‚úÖ Socket binding: OK\n‚úÖ HTTP parsing: OK\n‚úÖ File serving: OK\n‚úÖ CGI execution: OK\n';
                          break;
                        case 'clear':
                          output.textContent = 'Terminal cleared.\n';
                          break;
                        default:
                          output.textContent += `Command not found: ${e.target.value}\nType 'help' for available commands.\n`;
                      }
                      
                      e.target.value = '';
                      output.scrollTop = output.scrollHeight;
                    }
                  }}
                />
              </div>
            </div>
          </main>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
